<div class="container-fluid overflow-auto" style="height: 100vh;">
    <nav class="navbar navbar-light bg-light mt-2 mb-3">
        <div class="container-fluid">
            <span class="navbar-brand">รับเรื่องซ่อม</span>
        </div>
    </nav>

    <div class="d-flex flex-row mb-2">
        <div class="form-group" style="width: 12em;">
            <label>วันที่รับเรื่อง</label>
            <input class="form-control" [value]="issue.created | date: 'dd-MM-yyyy HH:mm:ss'"  disabled="true">
        </div>

        <div class="form-group ms-1" style="width: 12em;">
            <label>เลขที่รับเรื่อง</label>
            <input class="form-control" [value]="issue.code"  disabled="true">
        </div>

        <div class="form-group ms-1">
            <label class="label label-default">หน่วยงาน</label>
            <select class="form-select" [(ngModel)]="deptRef">
                <option [ngValue]="0">- เลือก -</option>
                <option *ngFor="let opt of depts" [ngValue]="opt.id">{{opt.name}}</option>
            </select>
        </div>

        <div class="form-group ms-1">
            <label class="label label-default">อาคาร</label>
            <input class="form-control" [(ngModel)]="issue.building">
        </div>

        <div class="form-group ms-1" style="width: 6em;">
            <label class="label label-default">ชั้น</label>
            <input class="form-control" [(ngModel)]="issue.floor">
        </div>

        <div class="form-group ms-1" style="width: 40em">
            <label class="label label-default">ที่อยู่</label>
            <input class="form-control" [(ngModel)]="issue.location">
        </div>
    </div>

    <div class="d-flex flex-row mb-2">
        <div class="form-group me-1 w-25">
            <label class="label label-default">ชื่อผู้แจ้ง</label>
            <input class="form-control" [(ngModel)]="issue.caller">
        </div>

        <div class="form-group me-1">
            <label class="label label-default">หมายเลขโทรศัพท์ติดต่อ</label>
            <input class="form-control" [(ngModel)]="issue.phoneno">
        </div>
    </div>

    <div class="d-flex flex-row mb-2">
        <div class="form-group me-1">
            <label>ประเภทงาน</label>
            <select class="form-select" [(ngModel)]="groupRef" (ngModelChange)="changeGroup()">
                <option [ngValue]="0">- เลือก -</option>
                <option *ngFor="let opt of groups" [ngValue]="opt.id">{{opt.name}}</option>
            </select>
        </div>

        <div class="form-group me-1">
            <label>อุปกรณ์/เครื่องจักร</label>
            <select class="form-select" [(ngModel)]="equipmentRef">
                <option [ngValue]="0">- เลือก -</option>
                <option *ngFor="let opt of equipments" [ngValue]="opt.id">{{opt.name}}</option>
            </select>
        </div>

        <div class="form-group me-1">
            <label>ประเภทระบบงาน</label>
            <select class="form-select" [(ngModel)]="categoryRef">
                <option [ngValue]="0">- เลือก -</option>
                <option *ngFor="let opt of categories" [ngValue]="opt.id">{{opt.name}}</option>
            </select>
        </div>

    </div>

    <div class="d-flex flex-row mb-2">
        <div class="form-group w-100">
            <label class="label label-default">ความต้องการ/อาการเสีย</label>
            <textarea class="form-control" rows="5" [(ngModel)]="issue.description"></textarea>
        </div>
    </div>

    <div class="d-flex flex-row me-1 mb-3">
        <button class="btn btn-primary me-1" (click)="newIssue()">
            <em class="fa fa-plus"></em>
            เปิดงานใหม่
        </button>

        <button class="btn btn-success me-1" (click)="save()">
            <em class="fa fa-save"></em>
            บันทึก
        </button>

        <button class="btn btn-info me-1" (click)="print()">
            <em class="fa fa-print"></em>
            พิมพ์ใบสั่งงาน
        </button>
    </div>

    <table id="new-issue-table" class="table table-bordered mb-3">
        <caption></caption>

        <thead>
            <tr>
                <th *ngFor="let header of dataTable.headerRow">{{header}}</th>
            </tr>
        </thead>

        <tbody>
            <tr *ngFor="let row of dataTable.dataRows"></tr>
        </tbody>
    </table>
</div>